<!DOCTYPE html>
<html>
  <head>
    <title>Best Text Editor</title>
  </head>
  <body>





    <script>

        var mood = "neutral";

        var branches = [];

        var yes = "remove later";
        var no = "remove later";

        var family = {
            "good" : {
                "message" : "That's great! A good family support network is really important! Would you like to talk about your family?",
                "responseHandler" : responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "bad" : {
                "message" : "I'm sorry to hear that. Family can be complicated sometimes, would you like to talk about it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry, I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }                
            },
            "goodbad" : {
                "message" : "Is that going well?",
                "responseHandler" : responseHandlerGoodBad1, //Wait for responseEvent
                "catch" : "Sorry, I didn't understand that, could you explain?"
            },
            responseEvent : function(){
                vine(this);
            }
        };

        var responseHandlerGoodBad1 = {
            "yes" : family.good,
            "sure" : family.good,
            "ok" : family.good,
            "why not" : family.good,
            "yeah" : family.good,
            "no" : family.bad,
            "nah" : family.bad,
            "nope" : family.bad        
        };

        var school = {
            "good" : {
                "message" : "Oh I'm glad it's going well! Do you want to talk about school?",
                "responseHandler" :responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "bad" : {
                "message" : "I'm sorry school's not going well, I understand it can be quite an important part of your life. Remember your teachers and school counsellors are there to help you if you need it. Would you like to talk about it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "goodbad" : {
                "message" : "Is that going well?",
                "responseHandler" : responseHandlerGoodBad2, //Wait for responseEvent
                "catch" : "Sorry, I didn't understand that, could you explain?"            },
            responseEvent : function(){
                vine(this);
            }
        };

        var responseHandlerGoodBad2 = {
            "yes" : school.good,
            "sure" : school.good,
            "ok" : school.good,
            "why not" : school.good,
            "yeah" : school.good,
            "no" : school.bad,
            "nah" : school.bad,
            "nope" : school.bad        
        };

        var university = {
            "good" : {
                "message" : "I'm glad uni is going well. I hope you're not too stressed about exams! Would you like to talk about uni?",
                "responseHandler" :responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }      
            },
            "bad" : {
                "message" : "I'm sorry uni's not going well, I know it can be overwhelming sometimes. Remember you can always talk to your academic support services if you need to. Would you like to talk about it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "goodbad" : {
                "message" : "Is that going well?",
                "responseHandler" : responseHandlerGoodBad3, //Wait for responseEvent
                "catch" : "Sorry, I didn't understand that, could you explain?"
            },
            responseEvent : function(){
                vine(this);
            }
        };

        var responseHandlerGoodBad3 = {
            "yes" : university.good,
            "sure" : university.good,
            "ok" : university.good,
            "why not" : university.good,
            "yeah" : university.good,
            "no" : university.bad,
            "nah" : university.bad,
            "nope" : university.bad        
        };

        var friend = {
            "good" : {
                "message" : "Thats good to hear! Friends are really important for your mental health! Would you like to talk about your friends?",
                "responseHandler" :responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "bad" : {
                "message" : "I'm sorry you're having trouble with friends at the moment, I know it might feel lonely at times but try to remember that friends come and go throughout our lives and your worth is not determined by your friends. Would you like to talk about it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "goodbad" : {
                "message" : "Is that going well?",
                "responseHandler" : responseHandlerGoodBad4, //Wait for responseEvent
                "catch" : "Sorry, I didn't understand that, could you explain?"
            },
            responseEvent : function(){
                vine(this);
            }
        };

        var responseHandlerGoodBad4 = {
            "yes" : friend.good,
            "sure" : friend.good,
            "ok" : friend.good,
            "why not" : friend.good,
            "yeah" : friend.good,
            "no" : friend.bad,
            "nah" : friend.bad,
            "nope" : friend.bad        
        };

        var girlfriend = {
            "good" : {
                "message" : "Oh wonderful! Would you like to talk about her?",
                "responseHandler" :responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "bad" : {
                "message" : "I'm sorry to hear things aren't going well. Relationships can be very difficult sometimes, it can be a lot of work. It's important to know when it is worth working on your relationship and when it may be best to part ways. Would you like to talk about it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "goodbad" : {
                "message" : "Is that going well?",
                "responseHandler" : responseHandlerGoodBad5, //Wait for responseEvent
                "catch" : "Sorry, I didn't understand that, could you explain?"
            },
            responseEvent : function(){
                vine(this);
            }
        };

        var responseHandlerGoodBad5 = {
            "yes" : girlfriend.good,
            "sure" : girlfriend.good,
            "ok" : girlfriend.good,
            "why not" : girlfriend.good,
            "yeah" : girlfriend.good,
            "no" : girlfriend.bad,
            "nah" : girlfriend.bad,
            "nope" : girlfriend.bad        
        };

        var boyfriend = {
            "good" : {
                "message" : "Oh wonderful! Would you like to talk about him?",
                "responseHandler" :responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "bad" : {
                "message" : "I'm sorry to hear things aren't going well. Relationships can be very difficult sometimes, it can be a lot of work. It's important to know when it is worth working on your relationship and when it may be best to part ways. Would you like to talk about it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "goodbad" : {
                "message" : "Is that going well?",
                "responseHandler" : responseHandlerGoodBad6, //Wait for responseEvent
                "catch" : "Sorry, I didn't understand that, could you explain?"
            },
            responseEvent : function(){
                vine(this);
            }
        };

        var responseHandlerGoodBad6 = {
            "yes" : boyfriend.good,
            "sure" : boyfriend.good,
            "ok" : boyfriend.good,
            "why not" : boyfriend.good,
            "yeah" : boyfriend.good,
            "no" : boyfriend.bad,
            "nah" : boyfriend.bad,
            "nope" : boyfriend.bad        
        };

        var partner = {
            "good" : {
               "message" : "Oh wonderful! Would you like to talk about them?",
               "responseHandler" :responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "bad" : {
                "message" : "I'm sorry to hear things aren't going well. Relationships can be very difficult sometimes, it can be a lot of work. it's important to know when it is worth working on your relationship and when it may be best to part ways. Would you like to talk about it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "goodbad" : {
                "message" : "Is that going well?",
                "responseHandler" : responseHandlerGoodBad7, //Wait for responseEvent
                "catch" : "Sorry, I didn't understand that, could you explain?"
            },
            responseEvent : function(){
                vine(this);
            }
        };

        var responseHandlerGoodBad7 = {
            "yes" : partner.good,
            "sure" : partner.good,
            "ok" : partner.good,
            "why not" : partner.good,
            "yeah" : partner.good,
            "no" : partner.bad,
            "nah" : partner.bad,
            "nope" : partner.bad        
        };

        var holiday = {
            "good" : {
                "message" : "Wow I'd love to go globetrotting like that! Did you have a good time?",
                "responseHandler" :responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "bad" : {
                "message" : "I'm sorry your holiday didn't go as well as you hoped. Would you like to talk about it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "goodbad" : {
                "message" : "Is that going well?",
                "responseHandler" : responseHandlerGoodBad8, //Wait for responseEvent
                "catch" : "Sorry, I didn't understand that, could you explain?"
            },
            responseEvent : function(){
                vine(this);
            }
        };

        var responseHandlerGoodBad8 = {
            "yes" : holiday.good,
            "sure" : holiday.good,
            "ok" : holiday.good,
            "why not" : holiday.good,
            "yeah" : holiday.good,
            "no" : holiday.bad,
            "nah" : holiday.bad,
            "nope" : holiday.bad        
        };

        var event = {
            "good" : {
                "message" : "Sounds lovely! Did you have a good time?",
                "responseHandler" : responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "bad" : {
                "message" : "Oh no, I'm sorry it didn't go well. Would you like to discuss it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "goodbad" : {
                "message" : "Is that going well?",
                "responseHandler" : responseHandlerGoodBad9, //Wait for responseEvent
                "catch" : "Sorry, I didn't understand that, could you explain?"
            },
            responseEvent : function(){
                vine(this);
            }
        };

        var responseHandlerGoodBad9 = {
            "yes" : event.good,
            "sure" : event.good,
            "ok" : event.good,
            "why not" : event.good,
            "yeah" : event.good,
            "no" : event.bad,
            "nah" : event.bad,
            "nope" : event.bad        
        };

        var work = {
            "good" : {
                "message" : "It's great that you love your job. Finding fulfilling work is hard but worth it! Would you like to talk about work?",
                "responseHandler" :responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "bad" : {
                "message" : " I'm sorry work's not going well right now. While it's an important part of your life, don't forget to keep a balance between work and home life, and try to derive satisfaction from other areas of your life. Would you like to talk about work?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "goodbad" : {
                "message" : "Is that going well?",
                "responseHandler" : responseHandlerGoodBad10, //Wait for responseEvent
                "catch" : "Sorry, I didn't understand that, could you explain?"
            },
            responseEvent : function(){
                vine(this);
            }
        };

        var responseHandlerGoodBad10 = {
            "yes" : work.good,
            "sure" : work.good,
            "ok" : work.good,
            "why not" : work.good,
            "yeah" : work.good,
            "no" : work.bad,
            "nah" : work.bad,
            "nope" : work.bad        
        };

        var anxiety = {
            "good" : {
                "message" : "I'm glad to hear you're feeling less anxious, you've made a lot of progress! Would you like to discuss what you think has helped?",
                "responseHandler" : responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "bad" : {
                "message" : "I'm sorry to hear that. Anxiety is hard to deal with and I'm proud of you for trying so hard. If you can find someone to talk to about your worries, it may help to talk through them with someone you trust. Remember that your family and friends are there to support you if you feel able to reach out to them. Would you like to talk about a particular worry you have right now?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "goodbad" : {
                "message" : "Is that going well?",
                "responseHandler" : responseHandlerGoodBad11, //Wait for responseEvent
                "catch" : "Sorry, I didn't understand that, could you explain?"
            },
            responseEvent : function(){
                vine(this);
            }
        };

        var responseHandlerGoodBad11 = {
            "yes" : anxiety.good,
            "sure" : anxiety.good,
            "ok" : anxiety.good,
            "why not" : anxiety.good,
            "yeah" : anxiety.good,
            "no" : anxiety.bad,
            "nah" : anxiety.bad,
            "nope" : anxiety.bad        
        };

        var depression = {
            "good" : {
                "message" : "That's great news! You've come along way, even if it sometimes feels otherwise. Would you like to discuss what you think might help further?",
                "responseHandler" : responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "bad" : {
                "message" : "That must be very difficult for you, I'm sorry you're going through that right now. Try to remember that it's ok to put your needs first, and self-care should be your top priority. Try to rely on those closest to you for support, remember you are not a burden on them. Would you like to discuss the situation further?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "goodbad" : {
                "message" : "Is that going well?",
                "responseHandler" : responseHandlerGoodBad12, //Wait for responseEvent
                "catch" : "Sorry, I didn't understand that, could you explain?"
            },
            responseEvent : function(){
                vine(this);
            }
        };

        var responseHandlerGoodBad12 = {
            "yes" : depression.good,
            "sure" : depression.good,
            "ok" : depression.good,
            "why not" : depression.good,
            "yeah" : depression.good,
            "no" : depression.bad,
            "nah" : depression.bad,
            "nope" : depression.bad        
        };

        var existential_dread = {
            "good" : {
                "message" : "Well I'm glad you're feeling better about the inevitable nothingness to which we must all one day return. Would you like to discuss it further?",
                "responseHandler" : responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            "bad" : {
                "message" : "We all must come to accept the inevitable onward march of time and the eternal nothingness to which we must all return. Would you like to continue discussing this??",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
           },
            "goodbad" : {
                "message" : "Is that going well?",
                "responseHandler" : responseHandlerGoodBad13, //Wait for responseEvent
                "catch" : "Sorry, I didn't understand that, could you explain?"
            },
            responseEvent : function(){
                vine(this);
            }
        };

        var responseHandlerGoodBad13 = {
            "yes" : existential_dread.good,
            "sure" : existential_dread.good,
            "ok" : existential_dread.good,
            "why not" : existential_dread.good,
            "yeah" : existential_dread.good,
            "no" : existential_dread.bad,
            "nah" : existential_dread.bad,
            "nope" : existential_dread.bad        
        };

    var responseHandlerTopic = {
        "family" : family,
        "school" : school,
        "university" : university,
        "uni" : university,
        "friend" : friend,
        "girlfriend" : girlfriend,
        "boyfriend" : boyfriend,
        "Wife" : girlfriend,
        "Husband" : boyfriend,
        "partner" : partner,
        "holiday" : holiday,
        "trip" : event,
        "event" : event,
        "wedding" : event,
        "party" : event,
        "night out" : event,
        "date" : event,
        "work" : work,
        "job" : work,
        "anxiety" : anxiety,
        "anxious" : anxiety,
        "worried" : anxiety,
        "depressed" : depression,
        "depression" : depression,
        "feeling sad" : depression,
        "existential dread" : existential_dread,
    };


    var yesnoYN6 = {
        yes : {
            "message" : "Great, what would you like to talk about?",
            "responseHandler" : responseHandlerTopic,
            "catch" : {
                "message" : "Maybe we should talk about that in a later session. Is there anything else you want to speak about?",
                "responseHandler" : responseHandlerTopic,
                "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
            }
        },

        no : {
            "message" : "Ok! I'm glad you stopped by, I hope you feel like we've made some progress. I'll see you soon for our next session!"
        }
    };

    var responseHandlerYN6 = {
        "yes" : yesnoYN6.yes,
        "sure" : yesnoYN6.yes,
        "ok" : yesnoYN6.yes,
        "why not" : yesnoYN6.yes,
        "yeah" : yesnoYN6.yes,
        "no" : yesnoYN6.no,
        "nah" : yesnoYN6.no,
        "nope" : yesnoYN6.no
    };

    var yesnoYN5 = {
        yes : {
            "message" : "I'm glad you feel comfortable talking to me about this. What would you like to say?",
            "responseHandler" : {},
            "catch" : {
                "message" : "That's really helpful information, thank you for sharing. I'm not qualified to give you further advice in this area, but the contact information for some very helpful organisations can be found here if you would like a professional opinion, https://www.time-to-change.org.uk/mental-health-and-stigma/help-and-support .Is there anything else you'd like to talk about?",
                "responseHandler" : responseHandlerYN6,
                "catch" : {
                    "message" : "What do you want to talk about?",
                    "responseHandler" : responseHandlerTopic,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            }
        },
        no : {
            "message" : "That's ok, you don't have to talk to me if you don't feel ready. If you would prefer to speak to a professional about this issue, the contact details for many helpful organisations can be found here, https://www.time-to-change.org.uk/mental-health-and-stigma/help-and-support . Is there something else you'd like to talk about?",
            "responseHandler" : responseHandlerYN6
        }
    };

    var responseHandlerYN5 = {
        "yes" : yesnoYN5.yes,
        "sure" : yesnoYN5.yes,
        "ok" : yesnoYN5.yes,
        "why not" : yesnoYN5.yes,
        "yeah" : yesnoYN5.yes,
        "no" : yesnoYN5.no,
        "nah" : yesnoYN5.no,
        "nope" : yesnoYN5.no
    };

        var yesnoYN2 = {
            yes : {
                "message" : "Great, what would you like to talk about?",
                "responseHandler" : responseHandlerTopic,
                "catch" : {
                    "message" : "Maybe we should talk about that in a later session. Is there anything else you want to speak about?",
                    "responseHandler" : responseHandlerTopic,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },

            no : {
                "message" : "Ok! I'm glad you stopped by, I'll see you soon for our next session."
            }
        };
        

        var responseHandlerYN2 = {
            "yes" : yesnoYN2.yes,
            "sure" : yesnoYN2.yes,
            "ok" : yesnoYN2.yes,
            "why not" : yesnoYN2.yes,
            "yeah" : yesnoYN2.yes,
            "no" : yesnoYN2.no,
            "nah" : yesnoYN2.no,
            "nope" : yesnoYN2.no
        };

        var yesnoYN1 = {
            yes : {
                "message" : "That's great, what would you like to tell me about it?",
                "responseHandler" : {},
                "catch" : {
                    "message" : "That sounds great! I'm glad everything's going well! is there anything else you'd like to talk about?",
                    "responseHandler" : responseHandlerYN2,
                    "catch" : {
                        "message" : "What do you want to talk about?",
                        "responseHandler" : responseHandlerTopic,
                        "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                    }
                }
            },
            no : {
                "message" : "That's ok, is there something else you'd like to talk about?",
                "responseHandler" : responseHandlerYN2,
                "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
            }
        };

        var responseHandlerYN1 = {
            "yes" : yesnoYN1.yes,
            "sure" : yesnoYN1.yes,
            "ok" : yesnoYN1.yes,
            "why not" : yesnoYN1.yes,
            "yeah" : yesnoYN1.yes,
            "of course" : yesnoYN1.yes,
            "no" : yesnoYN1.no,
            "nah" : yesnoYN1.no,
            "nope" : yesnoYN1.no,
            "not" : yesnoYN1.no
        };

        var responseHandlerGood = {
            "family" : family.good,
            "school" : school.good,
            "university" : university.good,
            "friend" : friend.good,
            "girlfriend" : girlfriend.good,
            "boyfriend" : boyfriend.good,
            "Wife" : girlfriend.good,
            "Husband" : boyfriend.good,
            "partner" : partner.good,
            "holiday" : holiday.good,
            "trip" : event.good,
            "event" : event.good,
            "wedding" : event.good,
            "party" : event.good,
            "night out" : event.good,
            "date" : event.good,
            "work" : work.good

        };

        var good = {
            "message" : "Oh that's good! What's been making you so happy?",
            "responseHandler" : responseHandlerGood,

            responseEvent : function(){
                mood = "good";
                console.log("Mood: " + mood);
            },

            "catch" : {
                "message" : "That sounds nice, I'm glad you're feeling good about life right now. Is there anything else you'd like to talk to me about?",
                "responseHandler" : responseHandlerYN2,
                "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
            }
        };

        var responseHandlerBad = {
            "family" : family.bad,
            "school" : school.bad,
            "university" : university.bad,
            "uni" : university.bad,
            "friend" : friend.bad,
            "girlfriend" : girlfriend.bad,
            "boyfriend" : boyfriend.bad,
            "Wife" : girlfriend.bad,
            "Husband" : boyfriend.bad,
            "partner" : partner.bad,
            "holiday" : holiday.bad,
            "trip" : event.bad,
            "event" : event.bad,
            "wedding" : event.bad,
            "party" : event.bad,
            "night out" : event.bad,
            "date" : event.bad,
            "work" : work.bad,
            "anxious" : anxiety.bad,
            "worried" : anxiety.bad,
            "anxiety" : anxiety.bad,

        };

        var yesnoYN4 = {
            yes : {
                "message" : "Ok, it's always your decision whether or not to seek professional help and you shouldn't do so if you don't feel ready. Just know that help is always available if you need it. Is there anything else you'd like to talk about?",
                "responseHandler" : responseHandlerTopic,
                "catch" : {
                    "message" : "I don't really understand what you mean, it may be best to speak to a professional about that. Is there something else I can help with?",
                    "responseHandler" : responseHandlerTopic,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            maybe : {
                "message" : "I can't help you further with that issue, so here are some contact details for support organisations if you feel they might be useful. https://www.time-to-change.org.uk/mental-health-and-stigma/help-and-support Is there anything else you want to talk about?",
                "responseHandler" : responseHandlerTopic,
                "catch" : {
                    "message" : "I don't really understand what you mean, it may be best to speak to a professional about that. Is there something else I can help with?",
                    "responseHandler" : responseHandlerTopic,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            no : {
                "message" : "Recognising that you need help is a great first step! here are the contact details of some professional support organisations who may be able to help you. https://www.time-to-change.org.uk/mental-health-and-stigma/help-and-support .Is there anything else you want to talk about?",
                "responseHandler" : responseHandlerTopic,
                "catch" : {
                    "message" : "I don't really understand what you mean, it may be best to speak to a professional about that. Is there something else I can help with?",
                    "responseHandler" : responseHandlerTopic,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            }
        };

        var responseHandlerYN4 = {
            "yes" : yesnoYN4.yes,
            "I'm sure" : yesnoYN4.yes,
            "sure" : yesnoYN4.yes,
            "ok" : yesnoYN4.yes,
            "why not" : yesnoYN4.yes,
            "I guess" : yesnoYN4.yes,
            "It might" : yesnoYN4.yes,
            "yeah" : yesnoYN4.yes,
            "maybe" : yesnoYN4.maybe,
            "I'm not sure" : yesnoYN4.maybe,
            "Not really" : yesnoYN4.maybe,
            "no" : yesnoYN4.no,
            "nah" : yesnoYN4.no,
            "nope" : yesnoYN4.no
        };

        var yesnoYN3 = {
            yes : {
                "message" : "Recognising that you need help is a great first step! here are the contact details of some professional support organisations who may be able to help you. https://www.time-to-change.org.uk/mental-health-and-stigma/help-and-support .Is there anything else you want to talk about?",
                "responseHandler" : responseHandlerTopic,
                "catch" : {
                    "message" : "I don't really understand what you mean, it may be best to speak to a professional about that. Is there something else I can help with?",
                    "responseHandler" : responseHandlerTopic,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            maybe : {
                "message" : "I can't help you further with that issue, so here are some contact details for support organisations if you feel they might be useful, https://www.time-to-change.org.uk/mental-health-and-stigma/help-and-support .What else would you like to talk about?",
                "responseHandler" : responseHandlerTopic,
                "catch" : {
                    "message" : "I don't really understand what you mean, it may be best to speak to a professional about that. Is there something else I can help with?",
                    "responseHandler" : responseHandlerTopic,
                    "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
                }
            },
            no : {
                "message" : "Are you sure?",
                "responseHandler" : responseHandlerYN4,
                "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
            }
        };

        var responseHandlerYN3 = {
            "yes" : yesnoYN3.yes,
            "sure" : yesnoYN3.yes,
            "ok" : yesnoYN3.yes,
            "why not" : yesnoYN3.yes,
            "I guess" : yesnoYN3.yes,
            "It might" : yesnoYN3.yes,
            "yeah" : yesnoYN3.yes,
            "maybe" : yesnoYN3.maybe,
            "I'm not sure" : yesnoYN3.maybe,
            "no" : yesnoYN3.no,
            "nah" : yesnoYN3.no,
            "nope" : yesnoYN3.no
        };

        var bad = {
            "message" : "Oh no, what's been troubling you?",
            "responseHandler" : responseHandlerBad,
            responseEvent : function(){
                mood = "bad";
                console.log("Mood: " + mood);
            },
            "catch" : {
                "message" : "I'm not really qualified to advise you on that I'm afraid. If you're having problems I can direct you to a professional, do you think that would help?",
                "responseHandler" : responseHandlerYN3,
                "catch" : "Shall we carry on this conversation in our next session? I'm afraid time's up for today. See you soon!"
            }

        };

        var cake = {
            "message" : "CAKE!"
        };

        var allThings = {
            "message" : "Hello, we're going to have a 'therapy session'. How are you today?",
            "responseHandler" : responseHandler1,
            "catch" : "Sorry, I didn't understand that, could you explain?"
        };

        var responseHandler1 = {
            "good"  : good,
            "great" : good,
            "awesome" : good,
            "happy" : good,
            "sad" : bad,
            "miserable" : bad,
            "depressed" : bad,
            "bad"   : bad,
            "shitty" : bad,
            "shit" : bad,
            "awful" : bad,
            "terrible" : bad,
            "cake"  : cake
        };

        var position = allThings;


        function makeBranch(question, responseHandler){
            var branch = {
                question : question,
                responseHandler : responseHandler
            };

            branch.question.responseHandler = branch.responseHandler;

            return branch;
        }

        function vine(topic){
            console.log(topic);
            topic.message = "Kill Me";
            console.log("cake");
            position = topic.goodbad;
            if (position.responseHandler == undefined) console.log("WARN: you're switching branch without a defined responseHandler");
        }


        var masterTopicLists = {
            good  : responseHandlerGood,
            bad   : responseHandlerBad  
        };
        //Init


        makeBranch(allThings, responseHandler1);
        makeBranch(good, responseHandlerGood);
        makeBranch(good.catch, responseHandlerYN2);
        makeBranch(bad, responseHandlerBad);
        makeBranch(bad.catch, responseHandlerYN3);
        makeBranch(yesnoYN3.yes, responseHandlerTopic);
        makeBranch(yesnoYN3.yes.catch, responseHandlerTopic);
        makeBranch(yesnoYN3.maybe, responseHandlerTopic);
        makeBranch(yesnoYN3.maybe.catch, responseHandlerTopic);
        makeBranch(yesnoYN3.no, responseHandlerYN4);
        makeBranch(yesnoYN4.yes, responseHandlerTopic);
        makeBranch(yesnoYN4.yes.catch, responseHandlerTopic);
        makeBranch(yesnoYN4.no, responseHandlerTopic);
        makeBranch(yesnoYN4.no.catch, responseHandlerTopic);
        makeBranch(yesnoYN4.maybe, responseHandlerTopic);
        makeBranch(yesnoYN4.maybe.catch, responseHandlerTopic);
        makeBranch(yesnoYN1.yes.catch, responseHandlerYN2);
        makeBranch(yesnoYN1.yes.catch.catch, responseHandlerTopic);
        makeBranch(yesnoYN1.no, responseHandlerYN2);
        makeBranch(yesnoYN2.yes, responseHandlerTopic);
        makeBranch(yesnoYN2.yes.catch, responseHandlerTopic);
        makeBranch(yesnoYN5.yes.catch, responseHandlerYN6);
        makeBranch(yesnoYN5.yes.catch.catch, responseHandlerTopic);
        makeBranch(yesnoYN5.no, responseHandlerYN6);
        makeBranch(yesnoYN6.yes, responseHandlerTopic);
        makeBranch(yesnoYN6.yes.catch, responseHandlerTopic);

        makeBranch(family.good, responseHandlerYN1);
        makeBranch(family.good.catch, responseHandlerYN1);
        makeBranch(family.bad, responseHandlerYN5);
        makeBranch(family.bad.catch, responseHandlerYN5);
        makeBranch(family.goodbad, responseHandlerGoodBad1);
        
        makeBranch(school.good, responseHandlerYN1);
        makeBranch(school.good.catch, responseHandlerYN1);
        makeBranch(school.bad, responseHandlerYN5);
        makeBranch(school.bad.catch, responseHandlerYN5);
        makeBranch(school.goodbad, responseHandlerGoodBad2);

        makeBranch(university.good, responseHandlerYN1);
        makeBranch(university.good.catch, responseHandlerYN1);
        makeBranch(university.bad, responseHandlerYN5);
        makeBranch(university.bad.catch, responseHandlerYN5);
        makeBranch(university.goodbad, responseHandlerGoodBad3);

        makeBranch(friend.good, responseHandlerYN1);
        makeBranch(friend.good.catch, responseHandlerYN1);
        makeBranch(friend.bad, responseHandlerYN5);
        makeBranch(friend.bad.catch, responseHandlerYN5);
        makeBranch(friend.goodbad, responseHandlerGoodBad4);

        makeBranch(girlfriend.good, responseHandlerYN1);
        makeBranch(girlfriend.good.catch, responseHandlerYN1);
        makeBranch(girlfriend.bad, responseHandlerYN5);
        makeBranch(girlfriend.bad.catch, responseHandlerYN5);
        makeBranch(girlfriend.goodbad, responseHandlerGoodBad5);

        makeBranch(boyfriend.good, responseHandlerYN1);
        makeBranch(boyfriend.good.catch, responseHandlerYN1);
        makeBranch(boyfriend.bad, responseHandlerYN5);
        makeBranch(boyfriend.bad.catch, responseHandlerYN5);
        makeBranch(boyfriend.goodbad, responseHandlerGoodBad6);

        makeBranch(partner.good, responseHandlerYN1);
        makeBranch(partner.good.catch, responseHandlerYN1);
        makeBranch(partner.bad, responseHandlerYN5);
        makeBranch(partner.bad.catch, responseHandlerYN5);
        makeBranch(partner.goodbad, responseHandlerGoodBad7);

        makeBranch(holiday.good, responseHandlerYN1);
        makeBranch(holiday.good.catch, responseHandlerYN1);
        makeBranch(holiday.bad, responseHandlerYN5);
        makeBranch(holiday.bad.catch, responseHandlerYN5);
        makeBranch(holiday.goodbad, responseHandlerGoodBad8);

        makeBranch(event.good, responseHandlerYN1);
        makeBranch(event.good.catch, responseHandlerYN1);
        makeBranch(event.bad, responseHandlerYN5);
        makeBranch(event.bad.catch, responseHandlerYN5);
        makeBranch(event.goodbad, responseHandlerGoodBad9);

        makeBranch(work.good, responseHandlerYN1);
        makeBranch(work.good.catch, responseHandlerYN1);
        makeBranch(work.bad, responseHandlerYN5);
        makeBranch(work.bad.catch, responseHandlerYN5);
        makeBranch(work.goodbad, responseHandlerGoodBad10);

        makeBranch(anxiety.good, responseHandlerYN1);
        makeBranch(anxiety.good.catch, responseHandlerYN1);
        makeBranch(anxiety.bad, responseHandlerYN5);
        makeBranch(anxiety.bad.catch, responseHandlerYN5);
        makeBranch(anxiety.goodbad, responseHandlerGoodBad11);

        makeBranch(depression.good, responseHandlerYN1);
        makeBranch(depression.good.catch, responseHandlerYN1);
        makeBranch(depression.bad, responseHandlerYN5);
        makeBranch(depression.bad.catch, responseHandlerYN5);
        makeBranch(depression.goodbad, responseHandlerGoodBad12);

        makeBranch(existential_dread.good, responseHandlerYN1);
        makeBranch(existential_dread.good.catch, responseHandlerYN1);
        makeBranch(existential_dread.bad, responseHandlerYN5);
        makeBranch(existential_dread.bad.catch, responseHandlerYN5);
        makeBranch(existential_dread.goodbad, responseHandlerGoodBad13);




        //process a command
        function processCommand(command){
            
            var thecatch = position.catch;
            var oldposition = position;

            //Clear this later

            position =  position.responseHandler[command];

            if (position == undefined) {
                console.log("WARN: Does the response handler have a corresponding command? It's not here");
                if (typeof thecatch == "string") {
                    position = oldposition;
                    return thecatch;
                }else{
                    if (thecatch == undefined) {
                        thecatch = allThings;
                        //HERE!
                    }
                    position = thecatch;
                }
            }

            if (position.responseEvent != undefined) {
                position.responseEvent();
            }

            var tempResponse = position.message;

            if (position.responseHandler == undefined) {
                
                console.log("ERROR: Does the response to this keyword have a corresponding response handler?");

                //return "Oh No";
            }
            return tempResponse;
        }

        function decodeSentence(sentence){
            var trimmed = sentence.replace(/[^\w\s]|_/g, "").replace(/\s+/g, " ").toLowerCase();
            var split = trimmed.split(" ");

            var keyword = "thiscouldnotpossiblywork"; 

            Object.entries(position.responseHandler).forEach(
                //([key, value]) => console.log(key, value)
                function(key){
                    //console.log(key[0]);
                    split.forEach(function(word){
                        if (word === key[0] && keyword === "thiscouldnotpossiblywork") keyword = word;
                    });
                }
            );
            console.log(keyword);

            return keyword;
        }




        //Document Editing Sheit

        var response = allThings.message + "<br/>";
        var message = "";

        function addText() {
            var command = document.getElementById("command").value;
            //processCommand(command);
            response+= processCommand(decodeSentence(command));
            response+= "<br/>";


            document.getElementById("console").innerHTML=response;
            document.getElementById("command").value="";

            return false;
        }

    </script>

    <div id="console">
    </div>
    <form onsubmit="return addText()">
      <input id="command" type="text" name="text" autocomplete="off"/>
    </form>

    <script>

        document.getElementById("console").innerHTML=response;

    </script>





  </body>
</html>