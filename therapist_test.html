<!DOCTYPE html>
<html>
  <head>
    <title>Best Text Editor</title>
  </head>
  <body>





    <script>

        var mood = "neutral";

        var branches = [];

        var yes = "remove later";
        var no = "remove later";

        var family = {
            "good" : {
                "message" : "That's great! A good family support network is really important! Would you like to talk about your family?",
                "responseHandler" : responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1
                }
            },
            "bad" : {
                "message" : "I'm sorry to hear that. Family can be complicated sometimes, would you like to talk about it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry, I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5
                }
            }
        };

        var school = {
            "good" : {
                "message" : "Oh I'm glad it's going well! Do you want to talk about school?",
                "responseHandler" :responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1
                }
            },
            "bad" : {
                "message" : "I'm sorry school's not going well, I understand it can be quite an important part of your life. Remember your teachers and school counsellors are there to help you if you need it. Would you like to talk about it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5
                }
            }
         };

        var university = {
            "good" : {
                "message" : "I'm glad uni is going well. I hope youre not too stressed about exams?",
                "responseHandler" :responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1
                }      
            },
            "bad" : {
                "message" : "I'm sorry uni's not going well, I know it can be overwhelming sometimes. Remember you can always talk to your academic support services if you need to. Would you like to talk about it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5
                }
            }  
        };

        var friend = {
            "good" : {
                "message" : "Thats good to hear! Friends are really important for your mental health! Would you like to talk about your friends?",
                "responseHandler" :responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1
                }
            },
            "bad" : {
                "message" : "I'm sorry you're having trouble with friends at the moment, I know it might feel lonely at times but try to remember that friends come and go throughout our lives and your worth is not determined by your friends. Would you like to talk about it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5
                }
            }
        };

        var girlfriend = {
            "good" : {
                "message" : "Oh wonderful! Would you like to talk about her?",
                "responseHandler" :responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1
                }
            },
            "bad" : {
                "message" : "I'm sorry to hear things aren't going well. Relationships can be very difficult sometimes, it can be a lot of work. It's important to know when it is worth working on your relationship and when it may be best to part ways. Would you like to talk about it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5
                }
            }
        };

        var boyfriend = {
            "good" : {
                "message" : "Oh wonderful! Would you like to talk about him?",
                "responseHandler" :responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1
                }
            },
            "bad" : {
                "message" : "I'm sorry to hear things aren't going well. Relationships can be very difficult sometimes, it can be a lot of work. It's important to know when it is worth working on your relationship and when it may be best to part ways. Would you like to talk about it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5
                }
            }
        };

        var partner = {
            "good" : {
               "message" : "Oh wonderful! Would you like to talk about them?",
               "responseHandler" :responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1
                }
            },
            "bad" : {
                "message" : "I'm sorry to hear things aren't going well. Relationships can be very difficult sometimes, it can be a lot of work. it's important to know when it is worth working on your relationship and when it may be best to part ways. Would you like to talk about it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5
                }
            }
        };

        var holiday = {
            "good" : {
                "message" : "Wow I'd love to go globetrotting like that! Did you have a good time?",
                "responseHandler" :responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1
                }
            },
            "bad" : {
                "message" : "I'm sorry your holiday didn't go as well as you hoped. Would you like to talk about it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5
                }
            }
        };

        var event = {
            "good" : {
                "message" : "Sounds lovely! Did you have a good time?",
                "responseHandler" : responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1
                }
            },
            "bad" : {
                "message" : "Oh no, I'm sorry it didn't go well. Would you like to discuss it?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5
                }
            }
        };

        var work = {
            "good" : {
                "message" : "It's great that you love your job. Finding fulfilling work is hard but worth it! Would you like to talk about work?",
                "responseHandler" :responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1
                }
            },
            "bad" : {
                "message" : " I'm sorry work's not going well right now. While it's an important part of your life, don't forget to keep a balance between work and home life, and try to derive satisfaction from other areas of your life. Would you like to talk about work?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5  
                }
            }
        };

        var anxiety = {
            "good" : {
                "message" : "I'm glad to hear you're feeling less anxious, you've made a lot of progress! Would you like to discuss what you think has helped?",
                "responseHandler" : responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1
                }
            },
            "bad" : {
                "message" : "I'm sorry to hear that. Anxiety is hard to deal with and I'm proud of you for trying so hard. If you can find someone to talk to about your worries, it may help to talk through them with someone you trust. Remember that your family and friends are there to support you if you feel able to reach out to them. Would you like to talk about a particular worry you have right now?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5
                }
            }
        };

        var depression = {
            "good" : {
                "message" : "That's great news! You've come along way, even if it sometimes feels otherwise. Would you like to discuss what you think might help further?",
                "responseHandler" : responseHandlerYN1,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN1
                }
            },
            "bad" : {
                "message" : "That must be very difficult for you, I'm sorry you're going through that right now. Try to remember that it's ok to put your needs first, and self-care should be your top priority. Try to rely on those closest to you for support, remember you are not a burden on them. Would you like to discuss the situation further?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5
                }
            }
        };

        var existential_dread = {
            "good" : {
                "message" : "?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5
                }
            },
            "bad" : {
                "message" : "?",
                "responseHandler" : responseHandlerYN5,
                "catch" : {
                    "message" : "I'm sorry I didn't understand you there. Would you like to talk?",
                    "responseHandler" : responseHandlerYN5
                }
            }
        };

    var responseHandlerTopic = {
        "family" : family,
        "school" : school,
        "university" : university,
        "uni" : university,
        "friend" : friend,
        "girlfriend" : girlfriend,
        "boyfriend" : boyfriend,
        "Wife" : girlfriend,
        "Husband" : boyfriend,
        "partner" : partner,
        "holiday" : holiday,
        "trip" : event,
        "event" : event,
        "wedding" : event,
        "party" : event,
        "night out" : event,
        "date" : event,
        "work" : work,
        "job" : work,
        "anxiety" : anxiety,
        "anxious" : anxiety,
        "worried" : anxiety,
        "depressed" : depression,
        "depression" : depression,
        "feeling sad" : depression,
        "existential dread" : existential_dread,
    };


    var yesnoYN6 = {
        yes : {
            "message" : "Great, what would you like to talk about?",
            "responseHandler" : responseHandlerTopic,
            "catch" : {
                "message" : "Maybe we should talk about that in a later session. Is there anything else you want to speak about?",
                "responseHandler" : responseHandlerTopic
            }
        },

        no : {
            "message" : "Ok! I'm glad you stopped by, I hope you feel like we've made some progress. I'll see you soon for our next session!"
        }
    };
    

    var responseHandlerYN6 = {
        "yes" : yesnoYN6.yes,
        "sure" : yesnoYN6.yes,
        "ok" : yesnoYN6.yes,
        "why not" : yesnoYN6.yes,
        "yeah" : yesnoYN6.yes,
        "no" : yesnoYN6.no,
        "nah" : yesnoYN6.no,
        "nope" : yesnoYN6.no
    };

    var yesnoYN5 = {
        yes : {
            "message" : "I'm glad you feel comfortable talking to me about this. What would you like to say?",
            "responseHandler" : {},
            "catch" : {
                "message" : "That's really helpful information, thank you for sharing. I'm not qualified to give you further advice in this area, but the contact information for some very helpful organisations can be found here if you would like a professional opinion,  .Is there anything else you'd like to talk about?",
                "responseHandler" : responseHandlerYN6,
                "catch" : {
                    "message" : "What do you want to talk about?",
                    "responseHandler" : responseHandlerTopic
                }
            }
        },
        no : {
            "message" : "That's ok, you don't have to talk to me if you don't feel ready. If you would prefer to speak to a professional about this issue, the contact details for many helpful organisations can be found here,  .Is there something else you'd like to talk about?",
            "responseHandler" : responseHandlerYN6
        }
    };

    var responseHandlerYN5 = {
        "yes" : yesnoYN5.yes,
        "sure" : yesnoYN5.yes,
        "ok" : yesnoYN5.yes,
        "why not" : yesnoYN5.yes,
        "yeah" : yesnoYN5.yes,
        "no" : yesnoYN5.no,
        "nah" : yesnoYN5.no,
        "nope" : yesnoYN5.no
    };

    var yesnoYN2 = {
        yes : {
            "message" : "Great, what would you like to talk about?",
            "responseHandler" : responseHandlerTopic,
            "catch" : {
                "message" : "Maybe we should talk about that in a later session. Is there anything else you want to speak about?",
                "responseHandler" : responseHandlerTopic
            }
        },

        no : {
            "message" : "Ok! I'm glad you stopped by, I'll see you soon for our next session."
        }
    };
    

    var responseHandlerYN2 = {
        "yes" : yesnoYN2.yes,
        "sure" : yesnoYN2.yes,
        "ok" : yesnoYN2.yes,
        "why not" : yesnoYN2.yes,
        "yeah" : yesnoYN2.yes,
        "no" : yesnoYN2.no,
        "nah" : yesnoYN2.no,
        "nope" : yesnoYN2.no
    };

    var yesnoYN1 = {
        yes : {
            "message" : "That's great, what would you like to tell me about it?",
            "responseHandler" : {},
            "catch" : {
                "message" : "That sounds great! I'm glad everything's going well! is there anything else you'd like to talk about?",
                "responseHandler" : responseHandlerYN2,
                "catch" : {
                    "message" : "What do you want to talk about?",
                    "responseHandler" : responseHandlerTopic
                }
            }
        },
        no : {
            "message" : "That's ok, is there something else you'd like to talk about?",
            "responseHandler" : responseHandlerYN2
        }
    };

    var responseHandlerYN1 = {
        "yes" : yesnoYN1.yes,
        "sure" : yesnoYN1.yes,
        "ok" : yesnoYN1.yes,
        "why not" : yesnoYN1.yes,
        "yeah" : yesnoYN1.yes,
        "no" : yesnoYN1.no,
        "nah" : yesnoYN1.no,
        "nope" : yesnoYN1.no
    };

    var responseHandlerGood = {
        "family" : family.good,
        "school" : school.good,
        "university" : university.good,
        "friend" : friend.good,
        "girlfriend" : girlfriend.good,
        "boyfriend" : boyfriend.good,
        "Wife" : girlfriend.good,
        "Husband" : boyfriend.good,
        "partner" : partner.good,
        "holiday" : holiday.good,
        "trip" : event.good,
        "event" : event.good,
        "wedding" : event.good,
        "party" : event.good,
        "night out" : event.good,
        "date" : event.good,
        "work" : work.good

        };

    var good = {
        "message" : "Oh that's good! What's been making you so happy?",
        "responseHandler" : responseHandlerGood,

        responseEvent : function(){
            mood = "good";
            console.log("Mood: " + mood);
        },

        "catch" : {
            "message" : "That sounds nice, I'm glad you're feeling good about life right now. Is there anything else you'd like to talk to me about?",
            "responseHandler" : responseHandlerYN2
        }
    };

    var responseHandlerBad = {
        "family" : family.bad,
        "school" : school.bad,
        "university" : university.bad,
        "uni" : university.bad,
        "friend" : friend.bad,
        "girlfriend" : girlfriend.bad,
        "boyfriend" : boyfriend.bad,
        "Wife" : girlfriend.bad,
        "Husband" : boyfriend.bad,
        "partner" : partner.bad,
        "holiday" : holiday.bad,
        "trip" : event.bad,
        "event" : event.bad,
        "wedding" : event.bad,
        "party" : event.bad,
        "night out" : event.bad,
        "date" : event.bad,
        "work" : work.bad,
        "anxious" : anxiety.bad,
        "worried" : anxiety.bad,
        "anxiety" : anxiety.bad,

    };

    var yesnoYN4 = {
        yes : {
            "message" : "Ok, it's always your decision whether or not to seek professional help and you shouldn't do so if you don't feel ready. Just know that help is always available if you need it. Is there anything else you'd like to talk about?",
            "responseHandler" : responseHandlerTopic, //ToDo: need to change this to the masterlist handler later
            "catch" : {
                "message" : "I don't really understand what you mean, it may be best to speak to a professional about that. Is there something else I can help with?",
                "responseHandler" : responseHandlerTopic //ToDo: need to change this to the masterlist handler later
            }
        },
        maybe : {
            "message" : "I can't help you further with that issue, so here are some contact details for support organisations if you feel they might be useful. https://www.time-to-change.org.uk/mental-health-and-stigma/help-and-support Is there anything else you want to talk about?",
            "responseHandler" : responseHandlerTopic, //ToDo: need to change this to the masterlist handler later
            "catch" : {
                "message" : "I don't really understand what you mean, it may be best to speak to a professional about that. Is there something else I can help with?",
                "responseHandler" : responseHandlerTopic //ToDo: need to change this to the masterlist handler later
            }
        },
        no : {
            "message" : "Recognising that you need help is a great first step! here are the contact details of some professional support organisations who may be able to help you. https://www.time-to-change.org.uk/mental-health-and-stigma/help-and-support"
        }
    };

    var responseHandlerYN4 = {
            "yes" : yesnoYN4.yes,
            "I'm sure" : yesnoYN4.yes,
            "sure" : yesnoYN4.yes,
            "ok" : yesnoYN4.yes,
            "why not" : yesnoYN4.yes,
            "I guess" : yesnoYN4.yes,
            "It might" : yesnoYN4.yes,
            "yeah" : yesnoYN4.yes,
            "maybe" : yesnoYN4.maybe,
            "I'm not sure" : yesnoYN4.maybe,
            "Not really" : yesnoYN4.maybe,
            "no" : yesnoYN4.no,
            "nah" : yesnoYN4.no,
            "nope" : yesnoYN4.no
        };

var yesnoYN3 = {
        yes : {
            "message" : "Recognising that you need help is a great first step! here are the contact details of some professional support organisations who may be able to help you. https://www.time-to-change.org.uk/mental-health-and-stigma/help-and-support"
        },
        maybe : {
            "message" : "I can't help you further with that issue, so here are some contact details for support organisations if you feel they might be useful. https://www.time-to-change.org.uk/mental-health-and-stigma/help-and-support Is there anything else you want to talk about?",
            "responseHandler" : responseHandlerTopic, //ToDo: need to change this to the masterlist handler later
            "catch" : {
                "message" : "I don't really understand what you mean, it may be best to speak to a professional about that. Is there something else I can help with?",
                "responseHandler" : responseHandlerTopic //ToDo: need to change this to the masterlist handler later
            }
        },
        no : {
            "message" : "Are you sure?",
            "responseHandler" : responseHandlerYN4
        }
    };

    var responseHandlerYN3 = {
        "yes" : yesnoYN3.yes,
        "sure" : yesnoYN3.yes,
        "ok" : yesnoYN3.yes,
        "why not" : yesnoYN3.yes,
        "I guess" : yesnoYN3.yes,
        "It might" : yesnoYN3.yes,
        "yeah" : yesnoYN3.yes,
        "maybe" : yesnoYN3.maybe,
        "I'm not sure" : yesnoYN3.maybe,
        "no" : yesnoYN3.no,
        "nah" : yesnoYN3.no,
        "nope" : yesnoYN3.no
    };

    var bad = {
        "message" : "Oh no, what's been troubling you?",
        "responseHandler" : responseHandlerBad,
        responseEvent : function(){
            mood = "bad";
            console.log("Mood: " + mood);
        },
        "catch" : {
            "message" : "I'm not really qualified to advise you on that I'm afraid. If you're having problems I can direct you to a professional, do you think that would help?",
            "responseHandler" : responseHandlerYN3
        }

    };

    var cake = {
        "message" : "CAKE!"
    };

    var allThings = {
        "message" : "Hello, we're going to have a 'therapy session'. How are you today?",
        "responseHandler" : responseHandler1,
        "catch" : "Sorry, I didn't understand that, could you explain?"
    };

    var responseHandler1 = {
        "good"  : good,
        "great" : good,
        "awesome" : good,
        "happy" : good,
        "sad" : bad,
        "miserable" : bad,
        "depressed" : bad,
        "bad"   : bad,
        "shitty" : bad,
        "shit" : bad,
        "awful" : bad,
        "terrible" : bad,
        "cake"  : cake
    };

    var position = allThings;


    function makeBranch(question, responseHandler){
        var branch = {
            question : question,
            responseHandler : responseHandler
        };

        branch.question.responseHandler = branch.responseHandler;

        return branch;
    }

    function secureLink(responseHandler, question){

    }


    var masterTopicLists = {
      good  : responseHandlerGood
      //bad   : responseHandlerBad  
    };
    //Init


    makeBranch(allThings, responseHandler1);
    makeBranch(good, responseHandlerGood);
    makeBranch(work, responseHandlerYN1);
    makeBranch(school, responseHandlerYN1);
    makeBranch(family, responseHandlerYN1);
    makeBranch(friend, responseHandlerYN1);
    makeBranch(girlfriend, responseHandlerYN1);
    makeBranch(boyfriend, responseHandlerYN1);
    makeBranch(partner, responseHandlerYN1);
    makeBranch(holiday, responseHandlerYN1);
    makeBranch(event, responseHandlerYN1);


    //process a command
    function processCommand(command){
        
        var thecatch = position.catch;
        var oldposition = position;

        //Clear this later

        position =  position.responseHandler[command];

        if (position == undefined) {
            console.log("WARN: Does the response handler have a corresponding command? It's not here");
            if (typeof thecatch == "string") {
                position = oldposition;
                return thecatch;
            }else{
                if (thecatch == undefined) {
                    thecatch = allThings;
                    //HERE!
                }
                position = thecatch;
            }
        }

        if (position.responseEvent != undefined) {
            position.responseEvent();
        }

        var tempResponse = position.message;

        if (position.responseHandler == undefined) {
            
            console.log("ERROR: Does the response to this keyword have a corresponding response handler?");

            //return "Oh No";
        }
        return tempResponse;
    }




    //Document Editing Sheit

    var response = allThings.message + "<br/>";
    var message = "";

    function addText() {
      var command = document.getElementById("command").value;
      //processCommand(command);
      response+= processCommand(command);
      response+= "<br/>";


      document.getElementById("console").innerHTML=response;
      document.getElementById("command").value="";

      return false;
    }

    </script>

    <div id="console">
    </div>
    <form onsubmit="return addText()">
      <input id="command" type="text" name="text" autocomplete="off"/>
    </form>

    <script>

    document.getElementById("console").innerHTML=response;

    </script>





  </body>
</html>